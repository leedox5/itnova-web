<?xml version="1.0" encoding="utf-8"?>

<sql-descriptor id="bp/tcams/ca/conf/PKCL/CATBCMPK" data-source="tcamsDS">
 <sql id="select" comment="조회">
  <![CDATA[
WITH T1 (
  PKCL_CORP_CODE
 ,PKCL_COME_CODE
 ,PKCL_TABL_ID
 ,PKCL_COLM_ID
 ,PKCL_SORT_NUMB
 ,PKCL_COLM_NAME
 ,PKCL_DATA_TYPE
 ,PKCL_DATA_LENG
 ,PKCL_COLM_ALGN
 ,PKCL_WITH_SCRN
 ,PKCL_DISP_ALLW
 ,PKCL_UPDT_DATE
 ,PKCL_UPDT_CMAN
 ,PKCL_INIT_DATE
 ,PKCL_INIT_CMAN  
) AS (
           SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_CORP_CODE' ,1 ,'법인코드' ,'CHAR' ,'4' ,'C' ,'60' ,'Y' ,'20200421' ,'GE000288' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_STND_GUBN' ,2 ,'표준구분' ,'CHAR' ,'1' ,'C' ,'60' ,'Y' ,'20200421' ,'GE000288' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_STND_DEGR' ,3 ,'표준차수' ,'VARCHAR2' ,'10' ,'C' ,'80' ,'Y' ,'20220629' ,'SYSTEMPG' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_GUBN_CODE' ,4 ,'구분코드' ,'VARCHAR2' ,'8' ,'L' ,'80' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_CODE' ,5 ,'코드' ,'VARCHAR2' ,'8' ,'L' ,'80' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_SORT_NUMB' ,6 ,'SORT순번' ,'NUMBER' ,'5' ,'C' ,'80' ,'Y' ,'20220629' ,'SYSTEMPG' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_GUBN_NAME' ,7 ,'구분코드명' ,'VARCHAR2' ,'80' ,'L' ,'200' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_CODE_NAME' ,8 ,'코드명' ,'VARCHAR2' ,'80' ,'L' ,'200' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_APPL_VALU' ,9 ,'적용값' ,'NUMBER' ,'22' ,'R' ,'80' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_APPL_PRIC' ,10 ,'적용단가' ,'NUMBER' ,'22' ,'R' ,'80' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_APPL_RATE1' ,11 ,'적용율1' ,'NUMBER' ,'22' ,'R' ,'80' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_APPL_RATE2' ,12 ,'적용율2' ,'NUMBER' ,'22' ,'R' ,'80' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_APPL_RATE3' ,13 ,'적용율3' ,'NUMBER' ,'22' ,'R' ,'80' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_CODE_GRP1' ,14 ,'분류그룹1' ,'VARCHAR2' ,'8' ,'L' ,'80' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_CODE_GRP2' ,15 ,'분류그룹2' ,'VARCHAR2' ,'8' ,'L' ,'80' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_CODE_GRP3' ,16 ,'분류그룹3' ,'VARCHAR2' ,'8' ,'L' ,'80' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_CODE_GRP4' ,17 ,'분류그룹4' ,'VARCHAR2' ,'8' ,'L' ,'80' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_CODE_GRP5' ,18 ,'분류그룹5' ,'VARCHAR2' ,'8' ,'L' ,'80' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_APPL_GUBN' ,19 ,'적용여부' ,'CHAR' ,'1' ,'C' ,'80' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_END0_DATE' ,20 ,'적용종료일' ,'CHAR' ,'8' ,'C' ,'80' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_REMK' ,21 ,'REMARK' ,'VARCHAR2' ,'200' ,'L' ,'200' ,'Y' ,'20140609' ,'SYSTEM' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_UPDT_CMAN' ,22 ,'수정자' ,'VARCHAR2' ,'8' ,'C' ,'80' ,'Y' ,'20220630' ,'SYSTEMPG' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_UPDT_DATE' ,23 ,'수정일' ,'VARCHAR2' ,'8' ,'C' ,'80' ,'Y' ,'20220630' ,'SYSTEMPG' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_INIT_CMAN' ,24 ,'등록자' ,'VARCHAR2' ,'8' ,'C' ,'80' ,'Y' ,'20220630' ,'SYSTEMPG' ,'20140609' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'CMPK_INIT_DATE' ,25 ,'등록일' ,'VARCHAR2' ,'8' ,'C' ,'80' ,'Y' ,'20220630' ,'SYSTEMPG' ,'20140609' ,'SYSTEM'  FROM DUAL
)
SELECT CASE WHEN B.TABLE_NAME     IS NOT NULL THEN 'Y' ELSE 'N' END CREATED_YN
      ,CASE WHEN C.COMMENTS       IS NOT NULL THEN 'Y' ELSE 'N' END COMMENTS_YN
      ,CASE WHEN D.PKCL_CORP_CODE IS NOT NULL THEN 'Y' ELSE 'N' END CHK_YN 
      ,CASE WHEN D.PKCL_UPDT_DATE >= A.PKCL_UPDT_DATE THEN 'Y' ELSE 'N' END UPDATED_YN
      ,A.*
  FROM T1 A
      LEFT OUTER JOIN 
       USER_TAB_COLUMNS B
      ON    B.TABLE_NAME     = A.PKCL_TABL_ID
        AND B.COLUMN_NAME    = A.PKCL_COLM_ID
      LEFT OUTER JOIN 
       USER_COL_COMMENTS C
      ON    C.TABLE_NAME     = A.PKCL_TABL_ID
        AND C.COLUMN_NAME    = A.PKCL_COLM_ID
      LEFT OUTER JOIN
       CITBPKCL D
      ON    D.PKCL_CORP_CODE = A.PKCL_CORP_CODE
        AND D.PKCL_COME_CODE = A.PKCL_COME_CODE
        AND D.PKCL_TABL_ID   = A.PKCL_TABL_ID  
        AND D.PKCL_COLM_ID   = A.PKCL_COLM_ID    
 ORDER BY A.PKCL_SORT_NUMB      
  ]]>
 </sql>
 
 <sql id="insert" comment="저장">
  <![CDATA[
INSERT INTO CITBPKCL (
  PKCL_CORP_CODE
 ,PKCL_COME_CODE
 ,PKCL_TABL_ID
 ,PKCL_COLM_ID
 ,PKCL_SORT_NUMB
 ,PKCL_COLM_NAME
 ,PKCL_DATA_TYPE
 ,PKCL_DATA_LENG
 ,PKCL_COLM_ALGN
 ,PKCL_WITH_SCRN
 ,PKCL_DISP_ALLW
 ,PKCL_UPDT_DATE
 ,PKCL_UPDT_CMAN
 ,PKCL_INIT_DATE
 ,PKCL_INIT_CMAN  
) VALUES ( 
  #pkcl_corp_code#
 ,#pkcl_come_code#
 ,#pkcl_tabl_id#
 ,#pkcl_colm_id#
 ,#pkcl_sort_numb#
 ,#pkcl_colm_name#
 ,#pkcl_data_type#
 ,#pkcl_data_leng#
 ,#pkcl_colm_algn#
 ,#pkcl_with_scrn#
 ,#pkcl_disp_allw#
 ,#pkcl_updt_date#
 ,#pkcl_updt_cman#
 ,#pkcl_init_date#
 ,#pkcl_init_cman#  
)
  ]]>
 </sql> 
 
 <sql id="update" comment="업데이트">
  <![CDATA[
UPDATE CITBPKCL
   SET PKCL_SORT_NUMB = #pkcl_sort_numb#
      ,PKCL_COLM_NAME = #pkcl_colm_name#
      ,PKCL_DATA_TYPE = #pkcl_data_type#
      ,PKCL_DATA_LENG = #pkcl_data_leng#
      ,PKCL_COLM_ALGN = #pkcl_colm_algn#
      ,PKCL_WITH_SCRN = #pkcl_with_scrn#
      ,PKCL_DISP_ALLW = #pkcl_disp_allw#
      ,PKCL_UPDT_DATE = #pkcl_updt_date#
      ,PKCL_UPDT_CMAN = #pkcl_updt_cman#
 WHERE PKCL_CORP_CODE = #pkcl_corp_code#
   AND PKCL_COME_CODE = #pkcl_come_code#
   AND PKCL_TABL_ID   = #pkcl_tabl_id#  
   AND PKCL_COLM_ID   = #pkcl_colm_id#    
  ]]>
 </sql>
 
</sql-descriptor> 