<?xml version="1.0" encoding="utf-8"?>
<sql-descriptor id="bp/tcams/init/CITBLOTQ" data-source="tcamsDS">

 <sql id="CREATE">
  <![CDATA[
CREATE TABLE CITBLOTQ(
 LOTQ_CORP_CODE VARCHAR(4),
 LOTQ_STND_GUBN CHAR(1),
 LOTQ_VEHL_GUBN CHAR(1),
 LOTQ_INDS_CODE CHAR(2),
 LOTQ_COME_CODE CHAR(4),
 LOTQ_APPL_DATE CHAR(8),
 LOTQ_SEQ0 NUMBER(10, 0),
 LOTQ_PROD_MIN0 NUMBER(10, 0),
 LOTQ_PROD_MAX0 NUMBER(10, 0),
 LOTQ_PROD_NAME VARCHAR(30),
 LOTQ_LOTQ_NAME VARCHAR(30),
 LOTQ_DETL_NAME1 VARCHAR(30),
 LOTQ_DETL_NAME2 VARCHAR(30),
 LOTQ_QTY0 NUMBER(10, 0),
 LOTQ_UPDT_DATE CHAR(8),
 LOTQ_UPDT_CMAN VARCHAR(8),
 LOTQ_INIT_DATE CHAR(8),
 LOTQ_INIT_CMAN VARCHAR(8),
 CONSTRAINT CITBLOTQ_PK PRIMARY KEY (
  LOTQ_CORP_CODE,
  LOTQ_STND_GUBN,
  LOTQ_VEHL_GUBN,
  LOTQ_INDS_CODE,
  LOTQ_COME_CODE,
  LOTQ_APPL_DATE,
  LOTQ_SEQ0
 )
)
  ]]>
 </sql>
 <sql id="select" comment="조회">
  <![CDATA[
WITH T1 (
  LOTQ_CORP_CODE
 ,LOTQ_STND_GUBN
 ,LOTQ_VEHL_GUBN
 ,LOTQ_INDS_CODE
 ,LOTQ_COME_CODE
 ,LOTQ_APPL_DATE
 ,LOTQ_SEQ0
 ,LOTQ_PROD_MIN0
 ,LOTQ_PROD_MAX0
 ,LOTQ_PROD_NAME
 ,LOTQ_LOTQ_NAME
 ,LOTQ_DETL_NAME1
 ,LOTQ_DETL_NAME2
 ,LOTQ_QTY0
 ,LOTQ_UPDT_DATE
 ,LOTQ_UPDT_CMAN
 ,LOTQ_INIT_DATE
 ,LOTQ_INIT_CMAN
) AS (
       SELECT 'K1', 'H', 'P', 'P2', 'BRAZ', '20140101', 1190, 5000, 10000, '∼10,000', 'BRAZING', 'ALL', 'ALL', 300, '20160101', 'SYSTEM', '20160101', 'SYSTEM' FROM DUAL
 UNION SELECT 'K1', 'H', 'P', 'P2', 'BRAZ', '20140101', 1192, 20000, 40000, '∼40,000', 'BRAZING', 'ALL', 'ALL', 600, '20160101', 'SYSTEM', '20160101', 'SYSTEM' FROM DUAL
 UNION SELECT 'K1', 'H', 'P', 'P2', 'BRAZ', '20140101', 1194, 60000, 80000, '∼80,000', 'BRAZING', 'ALL', 'ALL', 1200, '20160101', 'SYSTEM', '20160101', 'SYSTEM' FROM DUAL
 UNION SELECT 'K1', 'H', 'P', 'P2', 'BRAZ', '20140101', 1196, 100000, 150000, '∼150,000', 'BRAZING', 'ALL', 'ALL', 2000, '20160101', 'SYSTEM', '20160101', 'SYSTEM' FROM DUAL
 UNION SELECT 'K1', 'H', 'P', 'P2', 'BRAZ', '20140101', 1198, 200000, 9999999999, '200,000∼', 'BRAZING', 'ALL', 'ALL', 3000, '20160101', 'SYSTEM', '20160101', 'SYSTEM' FROM DUAL
)
SELECT CASE
        WHEN B.LOTQ_CORP_CODE IS NULL THEN 'I'
        WHEN A.LOTQ_UPDT_DATE > B.LOTQ_UPDT_DATE THEN 'U'
       END MG_MODE
      ,A.*
  FROM T1 A
      LEFT OUTER JOIN
       CITBLOTQ B
      ON    B.LOTQ_CORP_CODE = A.LOTQ_CORP_CODE
        AND B.LOTQ_STND_GUBN = A.LOTQ_STND_GUBN
        AND B.LOTQ_VEHL_GUBN = A.LOTQ_VEHL_GUBN
        AND B.LOTQ_INDS_CODE = A.LOTQ_INDS_CODE
        AND B.LOTQ_COME_CODE = A.LOTQ_COME_CODE
        AND B.LOTQ_APPL_DATE = A.LOTQ_APPL_DATE
        AND B.LOTQ_SEQ0 = A.LOTQ_SEQ0
  ]]>
 </sql>
 <sql id="insert" comment="저장">
  <![CDATA[
INSERT INTO CITBLOTQ (
  LOTQ_CORP_CODE
 ,LOTQ_STND_GUBN
 ,LOTQ_VEHL_GUBN
 ,LOTQ_INDS_CODE
 ,LOTQ_COME_CODE
 ,LOTQ_APPL_DATE
 ,LOTQ_SEQ0
 ,LOTQ_PROD_MIN0
 ,LOTQ_PROD_MAX0
 ,LOTQ_PROD_NAME
 ,LOTQ_LOTQ_NAME
 ,LOTQ_DETL_NAME1
 ,LOTQ_DETL_NAME2
 ,LOTQ_QTY0
 ,LOTQ_UPDT_DATE
 ,LOTQ_UPDT_CMAN
 ,LOTQ_INIT_DATE
 ,LOTQ_INIT_CMAN
) VALUES (
  #lotq_corp_code#
 ,#lotq_stnd_gubn#
 ,#lotq_vehl_gubn#
 ,#lotq_inds_code#
 ,#lotq_come_code#
 ,#lotq_appl_date#
 ,#lotq_seq0#
 ,#lotq_prod_min0#
 ,#lotq_prod_max0#
 ,#lotq_prod_name#
 ,#lotq_lotq_name#
 ,#lotq_detl_name1#
 ,#lotq_detl_name2#
 ,#lotq_qty0#
 ,#lotq_updt_date#
 ,#lotq_updt_cman#
 ,#lotq_init_date#
 ,#lotq_init_cman#
)
  ]]>
 </sql>

 <sql id="SELECT.BRAZ.18-5">
  <![CDATA[
SELECT *
  FROM CITBLOTQ
 WHERE LOTQ_VEHL_GUBN = 'P'
   AND LOTQ_INDS_CODE = 'P2'
  ]]>
 </sql>

</sql-descriptor>