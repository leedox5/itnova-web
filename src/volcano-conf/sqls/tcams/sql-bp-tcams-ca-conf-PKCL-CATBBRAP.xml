<?xml version="1.0" encoding="utf-8"?>
<sql-descriptor id="bp/tcams/ca/conf/PKCL/CATBBRAP" data-source="tcamsDS">

 <sql id="select" comment="조회">
  <![CDATA[
WITH T1 (
  PKCL_CORP_CODE
 ,PKCL_COME_CODE
 ,PKCL_TABL_ID
 ,PKCL_COLM_ID
 ,PKCL_SORT_NUMB
 ,PKCL_COLM_NAME
 ,PKCL_DATA_TYPE
 ,PKCL_DATA_LENG
 ,PKCL_COLM_ALGN
 ,PKCL_WITH_SCRN
 ,PKCL_DISP_ALLW
 ,PKCL_UPDT_DATE
 ,PKCL_UPDT_CMAN
 ,PKCL_INIT_DATE
 ,PKCL_INIT_CMAN  
) AS (
           SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_CORP_CODE', 1, '법인코드', 'VARCHAR2', '4', 'L', '60', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_STND_GUBN', 2, '표준구분', 'CHAR', '1', 'C', '40', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_STND_DEGR', 3, '개정차수 ', 'VARCHAR2', '10', 'L', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_MATL_SEQ0', 4, '재료SEQ', 'NUMBER', '5', 'R', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_KIND_CODE', 5, '용접종류', 'VARCHAR2', '8', 'L', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_MATL_NAME', 6, '재료명', 'VARCHAR2', '100', 'L', '150', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_WLDR_CODE', 7, '용접로', 'VARCHAR2', '8', 'L', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_LOSS_TYPE', 8, '불량율TYPE', 'VARCHAR2', '8', 'L', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_THIK_MIN0', 9, '두께 MIN', 'NUMBER', '14', 'R', '100', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_THIK_MAX0', 10, '두께 MAX', 'NUMBER', '14', 'R', '100', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_MATL_PRIC', 11, '재료비', 'NUMBER', '14', 'R', '100', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_LOAD_PRIC', 12, 'LOADING 비', 'NUMBER', '14', 'R', '100', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_PURE_PRIC', 13, '순수용접비', 'NUMBER', '14', 'R', '100', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_UNLO_PRIC', 14, 'UNLOADING비', 'NUMBER', '14', 'R', '100', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_NET0_CYT0', 15, 'NET CT', 'NUMBER', '7', 'R', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_CONV_SPED', 16, 'CONVEYOR속도', 'NUMBER', '7', 'R', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_NET0_CYTL', 17, 'NET CT LOAD', 'NUMBER', '7', 'R', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_NET0_CYTU', 18, 'NET CT UNLOAD', 'NUMBER', '7', 'R', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_CAVT', 19, 'CVT', 'NUMBER', '10', 'R', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_DFCT_RAT1', 20, '가공불량율', 'NUMBER', '5', 'R', '60', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_DFCT_RAT2', 21, '폐기불량율', 'NUMBER', '5', 'R', '60', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_APLY_COEF', 22, '적용계수', 'NUMBER', '5', 'R', '60', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_BELT_LENG', 23, 'BELT길이', 'NUMBER', '7', 'R', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_WELD_PRIC', 24, '용가재금액', 'NUMBER', '7', 'R', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_BRAZ_PRIC', 25, 'BRAZ소비금액', 'NUMBER', '7', 'R', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_PRSN_CNT0', 26, '인원', 'NUMBER', '7', 'R', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_MCHH_CODE', 27, '기계장비코드', 'VARCHAR2', '20', 'L', '100', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_APPL_GUBN', 28, '적용여부', 'CHAR', '1', 'C', '40', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_REMK', 29, 'REMARK', 'VARCHAR2', '200', 'L', '200', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_UPDT_CMAN', 30, '수정자', 'VARCHAR2', '8', 'L', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_UPDT_DATE', 31, '수정일', 'VARCHAR2', '8', 'L', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_INIT_CMAN', 32, '등록자', 'VARCHAR2', '8', 'L', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
 UNION ALL SELECT 'K1', 'BRAZ', 'CATBBRAP', 'BRAP_INIT_DATE', 33, '등록일', 'VARCHAR2', '8', 'L', '80', 'Y', '20171214', 'SYSTEM', '20171214', 'SYSTEM' FROM DUAL
)
SELECT CASE WHEN B.TABLE_NAME     IS NOT NULL THEN 'Y' ELSE 'N' END CREATED_YN
      ,CASE WHEN C.COMMENTS       IS NOT NULL THEN 'Y' ELSE 'N' END COMMENTS_YN
      ,CASE WHEN D.PKCL_CORP_CODE IS NOT NULL THEN 'Y' ELSE 'N' END CHK_YN 
      ,CASE WHEN D.PKCL_UPDT_DATE >= A.PKCL_UPDT_DATE THEN 'Y' ELSE 'N' END UPDATED_YN
      ,CASE
        WHEN D.PKCL_CORP_CODE IS NULL            THEN 'I'
        WHEN A.PKCL_UPDT_DATE > D.PKCL_UPDT_DATE THEN 'U'  
        ELSE 'X'
       END MG_MODE
      ,A.*
  FROM T1 A
      LEFT OUTER JOIN 
       USER_TAB_COLUMNS B
      ON    B.TABLE_NAME     = A.PKCL_TABL_ID
        AND B.COLUMN_NAME    = A.PKCL_COLM_ID
      LEFT OUTER JOIN 
       USER_COL_COMMENTS C
      ON    C.TABLE_NAME     = A.PKCL_TABL_ID
        AND C.COLUMN_NAME    = A.PKCL_COLM_ID
      LEFT OUTER JOIN
       CITBPKCL D
      ON    D.PKCL_CORP_CODE = A.PKCL_CORP_CODE
        AND D.PKCL_COME_CODE = A.PKCL_COME_CODE
        AND D.PKCL_TABL_ID   = A.PKCL_TABL_ID  
        AND D.PKCL_COLM_ID   = A.PKCL_COLM_ID    
 ORDER BY A.PKCL_SORT_NUMB      
  ]]>
 </sql>
 
 <sql id="insert" comment="저장">
  <![CDATA[
INSERT INTO CITBPKCL (
  PKCL_CORP_CODE
 ,PKCL_COME_CODE
 ,PKCL_TABL_ID
 ,PKCL_COLM_ID
 ,PKCL_SORT_NUMB
 ,PKCL_COLM_NAME
 ,PKCL_DATA_TYPE
 ,PKCL_DATA_LENG
 ,PKCL_COLM_ALGN
 ,PKCL_WITH_SCRN
 ,PKCL_DISP_ALLW
 ,PKCL_UPDT_DATE
 ,PKCL_UPDT_CMAN
 ,PKCL_INIT_DATE
 ,PKCL_INIT_CMAN  
) VALUES ( 
  #pkcl_corp_code#
 ,#pkcl_come_code#
 ,#pkcl_tabl_id#
 ,#pkcl_colm_id#
 ,#pkcl_sort_numb#
 ,#pkcl_colm_name#
 ,#pkcl_data_type#
 ,#pkcl_data_leng#
 ,#pkcl_colm_algn#
 ,#pkcl_with_scrn#
 ,#pkcl_disp_allw#
 ,#pkcl_updt_date#
 ,#pkcl_updt_cman#
 ,#pkcl_init_date#
 ,#pkcl_init_cman#  
)
  ]]>
 </sql> 
 
 <sql id="update" comment="업데이트">
  <![CDATA[
UPDATE CITBPKCL
   SET PKCL_SORT_NUMB = #pkcl_sort_numb#
      ,PKCL_COLM_NAME = #pkcl_colm_name#
      ,PKCL_DATA_TYPE = #pkcl_data_type#
      ,PKCL_DATA_LENG = #pkcl_data_leng#
      ,PKCL_COLM_ALGN = #pkcl_colm_algn#
      ,PKCL_WITH_SCRN = #pkcl_with_scrn#
      ,PKCL_DISP_ALLW = #pkcl_disp_allw#
      ,PKCL_UPDT_DATE = #pkcl_updt_date#
      ,PKCL_UPDT_CMAN = #pkcl_updt_cman#
 WHERE PKCL_CORP_CODE = #pkcl_corp_code#
   AND PKCL_COME_CODE = #pkcl_come_code#
   AND PKCL_TABL_ID   = #pkcl_tabl_id#  
   AND PKCL_COLM_ID   = #pkcl_colm_id#    
  ]]>
 </sql>
 
</sql-descriptor> 