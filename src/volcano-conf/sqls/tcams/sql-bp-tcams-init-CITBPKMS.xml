<?xml version="1.0" encoding="utf-8"?>
<sql-descriptor id="bp/tcams/init/CITBPKMS" data-source="tcamsDS">

 <sql id="CREATE">
  <![CDATA[
CREATE TABLE CITBPKMS(
    PKMS_CORP_CODE VARCHAR(4)
   ,PKMS_COME_CODE VARCHAR(4)
   ,PKMS_TABL_ID   VARCHAR(50)
   ,PKMS_SORT_NUMB NUMBER
   ,PKMS_TABL_NAME VARCHAR(100)
   ,PKMS_UPDT_DATE VARCHAR(20)   
   ,PKMS_UPDT_CMAN VARCHAR(8)
   ,PKMS_INIT_DATE VARCHAR(20)   
   ,PKMS_INIT_CMAN VARCHAR(8) 
)
  ]]>
 </sql>
 <sql id="select" comment="조회">
  <![CDATA[
WITH T1 (
  PKMS_CORP_CODE
 ,PKMS_COME_CODE
 ,PKMS_TABL_ID
 ,PKMS_SORT_NUMB
 ,PKMS_TABL_NAME
 ,PKMS_UPDT_DATE
 ,PKMS_UPDT_CMAN
 ,PKMS_INIT_DATE
 ,PKMS_INIT_CMAN
) AS (
           SELECT 'K1' ,'ALL0' ,'CATBCMPK' ,'0' ,'CA-자동공법공용콤보' ,'20221027' ,'GE001037' ,'20140901' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'PCBD' ,'CATBPCBM' ,'1' ,'PCB 재료비정보' ,'20180702' ,'SYSTEM' ,'20180702' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'PCBD' ,'CATBPCBP' ,'2' ,'PCB 가공비정보' ,'20180702' ,'SYSTEM' ,'20180702' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'PCBD' ,'CATBPCBC' ,'3' ,'PCB 원판당 적용수량' ,'20180702' ,'SYSTEM' ,'20180702' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'PCBD' ,'CATBPCBI' ,'21' ,'INPUT' ,'20240508' ,'SYSTEMPG' ,'20240508' ,'SYSTEMPG'  FROM DUAL
 UNION ALL SELECT 'K1' ,'BRAZ' ,'CATBBRAM' ,'1' ,'BRAZING 재료비정보' ,'20171214' ,'SYSTEM' ,'20171214' ,'SYSTEM'  FROM DUAL
 UNION ALL SELECT 'K1' ,'BRAZ' ,'CATBBRAP' ,'2' ,'BRAZING 가공비정보' ,'20171214' ,'SYSTEM' ,'20171214' ,'SYSTEM'  FROM DUAL
)
SELECT CASE WHEN B.TABLE_NAME IS NOT NULL THEN 'Y' ELSE 'N' END CREATED_YN
      ,CASE WHEN C.COMMENTS IS NOT NULL THEN 'Y' ELSE 'N' END COMMENTS_YN
      ,CASE
        WHEN D.PKMS_CORP_CODE IS NULL THEN 'I'
        WHEN A.PKMS_UPDT_DATE > D.PKMS_UPDT_DATE THEN 'U'  
        ELSE 'X'
       END MG_MODE
      ,A.*
  FROM T1 A
      LEFT OUTER JOIN 
       USER_TABLES B
      ON B.TABLE_NAME = A.PKMS_TABL_ID
      LEFT OUTER JOIN 
       USER_TAB_COMMENTS C
      ON C.TABLE_NAME = A.PKMS_TABL_ID
      LEFT OUTER JOIN
       CITBPKMS D
      ON    D.PKMS_CORP_CODE = A.PKMS_CORP_CODE
        AND D.PKMS_COME_CODE = A.PKMS_COME_CODE
        AND D.PKMS_TABL_ID   = A.PKMS_TABL_ID        
  ]]>
 </sql>
 <sql id="insert" comment="저장">
  <![CDATA[
INSERT INTO XXXXXXXX (

) VALUES ( 

)
  ]]>
 </sql> 
 
</sql-descriptor>